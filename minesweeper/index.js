(()=>{"use strict";var t={d:(s,e)=>{for(var i in e)t.o(e,i)&&!t.o(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:e[i]})},o:(t,s)=>Object.prototype.hasOwnProperty.call(t,s)};t.d({},{l:()=>c});class s{constructor(){this.modal=document.querySelector(".modal"),this.text=this.modal.querySelector(".modal__text"),this.seconds=Number(document.querySelector(".counter__time").textContent.split(" ")[1]),this.moves=Number(document.querySelector(".counter__moves").textContent.split(" ")[1])}open(t){this.modal.style.display="block",this.modal.querySelector(".modal__close").addEventListener("click",(()=>{this.close(),c.newGame()})),window.addEventListener("click",(t=>{t.target==this.modal&&(this.close(),c.newGame())})),this.text.textContent=!0===t?`Hooray! You found all mines in ${this.seconds} seconds and ${this.moves} moves!`:"Game over. Try again"}close(){this.modal.style.display="none"}}class e{constructor(t){this.counter=t,this.sec=0,this.timerId=null}start(){this.timerId||(this.timerId=setInterval((()=>{this.sec++,this.addText()}),1e3),console.log("Timer Start!"))}addText(){this.counter.textContent=`Time: ${this.sec>99?this.sec:"0"+(this.sec>9?this.sec:"0"+this.sec)}`}stop(){console.log("Timer Stop!"),this.sec=0,clearInterval(this.timerId),this.timerId=null,this.addText()}}class i{constructor(t,s){this.grid=document.querySelector(".grid"),this.width=t,this.bombAmount=s,this.squares=[],this.flags=0,this.isGameOver=!1,this.win=!1,this.timer=new e(document.querySelector(".counter__time")),this.moves=document.querySelector(".counter__moves"),this.countMove=0}start(){this.grid.innerHTML="",this.countMove=0,this.moves.textContent=`Moves: ${this.countMove}`,this.createBoard()}createBoard(){const t=Array(this.width*this.width).fill("cell_empty");for(let s=0;s<this.width*this.width;s++){const e=document.createElement("div");e.classList.add("grid__cell"),e.setAttribute("id",s),e.classList.add(t[s]),this.grid.appendChild(e),this.squares.push(e),e.addEventListener("click",(t=>{if(0===this.countMove)return this.addBombs(t.target.id),this.addMove(),this.addNumbers(),void t.target.click();this.click(e),this.addMove(),this.isGameOver||this.timer.start()})),e.oncontextmenu=t=>{t.preventDefault(),this.addFlag(e),this.isGameOver||this.timer.start()}}this.addNumbers()}addNumbers(){for(let t=0;t<this.squares.length;t++){let s=0;const e=t%this.width==0,i=t%this.width==this.width-1;this.squares[t].classList.contains("cell_empty")&&(t>0&&!e&&this.squares[t-1].classList.contains("cell_bomb")&&s++,t>9&&!i&&this.squares[t+1-this.width].classList.contains("cell_bomb")&&s++,t>10&&this.squares[t-this.width].classList.contains("cell_bomb")&&s++,t>11&&!e&&this.squares[t-1-this.width].classList.contains("cell_bomb")&&s++,t<99&&!i&&this.squares[t+1].classList.contains("cell_bomb")&&s++,t<90&&!e&&this.squares[t-1+this.width].classList.contains("cell_bomb")&&s++,t<=88&&!i&&this.squares[t+1+this.width].classList.contains("cell_bomb")&&s++,t<=89&&this.squares[t+this.width].classList.contains("cell_bomb")&&s++,this.squares[t].setAttribute("data",s))}}addFlag(t){this.isGameOver||!t.classList.contains("cell_checked")&&this.flags<this.bombAmount&&(t.classList.contains("cell_flag")?(t.classList.remove("cell_flag"),t.innerHTML="",this.flags--):(t.classList.add("cell_flag"),t.innerHTML="F",this.flags++,this.checkForWin()))}click(t){let s=t.id;if(!this.isGameOver&&!t.classList.contains("cell_checked")&&!t.classList.contains("cell_flag")){if(t.classList.contains("cell_bomb"))this.gameOver(t);else{let e=t.getAttribute("data");if(0!=e)return t.classList.add("cell_checked"),t.innerHTML=e,void this.checkForWin();this.checkSquare(s)}t.classList.add("cell_checked")}}addBombs(t){const s=t=>{const e=Array(this.bombAmount).fill("cell_bomb"),i=Array(this.width*this.width-this.bombAmount).fill("cell_empty").concat(e).sort((()=>Math.random()-.5));return"cell_bomb"===i[t]?s(t):i},e=s(t);console.log(e);for(let t=0;t<this.squares.length;t++)this.squares[t].classList.add(e[t])}checkSquare(t){const s=t%this.width==0,e=t%this.width==this.width-1,i=t=>{const s=document.getElementById(t);this.click(s)};setTimeout((()=>{if(t>0&&!s){const s=Number(t)-1;i(s)}if(t>9&&!e){const s=Number(t)+1-this.width;i(s)}if(t>10){const s=Number(t)-this.width;i(s)}if(t>11&&!s){const s=Number(t)-1-this.width;i(s)}if(t<99&&!e){const s=Number(t)+1;i(s)}if(t<90&&!s){const s=Number(t)-1+this.width;i(s)}if(t<88&&!e){const s=Number(t)+1+this.width;i(s)}if(t<89){const s=Number(t)+this.width;i(s)}}),10)}gameOver(t){this.isGameOver=!0,(new s).open(this.win),this.timer.stop(),this.squares.forEach((t=>{t.classList.contains("cell_bomb")&&(t.innerHTML="B",t.style.backgroundColor="red")}))}checkForWin(){let t=0,e=0;for(let i=0;i<this.squares.length;i++)this.squares[i].classList.contains("cell_flag")&&this.squares[i].classList.contains("cell_bomb")&&t++,this.squares[i].classList.contains("cell_checked")&&e++,(t===this.bombAmount||e===this.squares.length-this.bombAmount)&&(this.isGameOver=!0,this.win=!0,(new s).open(this.win),this.timer.stop())}addMove(){this.countMove++,this.moves.textContent=`Moves: ${this.countMove}`}}const o=(t,s)=>{const e=document.createElement(t);return e.classList.add(s),e},n=document.querySelector("body"),c=new class{constructor(t){this.body=t,this.width=10,this.bombAmount=10}render(){(t=>{const s=o("header","header");t.append(s);const e=o("h1","title");e.textContent="Minesweeper",s.append(e);const i=o("div","counter");s.append(i);const n=o("div","counter__time");n.textContent="Time: 000",i.append(n);const c=o("div","counter__moves");c.textContent="Moves: 0",i.append(c);const a=o("main","main");t.append(a);const l=o("div","grid");a.append(l);const h=o("div","modal");a.append(h);const r=o("div","modal__content");h.append(r);const d=o("p","modal__text");d.textContent="Hooray! You found all mines in ## seconds and N moves!",r.append(d);const m=o("span","modal__close");m.textContent="close",r.append(m)})(this.body)}newGame(){new i(this.width,this.bombAmount).start()}}(n);c.render(),c.newGame()})();
//# sourceMappingURL=index.js.map